{"ast":null,"code":"// Imports\nimport React,{useState,useEffect}from\"react\";import Category from\"./Category.jsx\";import Zoom from\"@material-ui/core/Zoom\";import Fab from\"@material-ui/core/Fab\";import AddIcon from\"@material-ui/icons/Add\";// The Expense function returns the expense section of the website\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Expense(_ref){let{onAdd}=_ref;// Constants\nconst[isExpanded,setExpanded]=useState(false);const[categories,setCategories]=useState([]);const[isCategory,setIsCategory]=useState(true);const[exp,setExp]=useState({title:\"\",amount:\"\",date:\"\",description:\"\"});useEffect(()=>{fetch(\"/api/categories\").then(res=>res.json()).then(data=>setCategories(data));},[]);// Nested functions\n// The handleChange function gets current input from form\nconst handleChange=event=>{// Get user input\nconst{name,value}=event.target;// return user input\nsetExp(prevExp=>{return{...prevExp,[name]:value};});};// The submitExp submits the info from the form to the expense array\nconst submitExp=event=>{// Remove white space\nconst isWhitespaceString=str=>!str.replace(/\\s/g,'').length;const{title,amount,date,description}=exp;// If user filled in required fields\nif(!isWhitespaceString(title)&&Number(amount)>=0&&date!==\"\"){if(!categories.includes(title)){setCategories(prevCats=>{setIsCategory(true);return[...prevCats,title];});}fetch('http://localhost:8080/submit',{method:\"POST\",headers:{\"Content-type\":\"application/json\"},body:JSON.stringify(exp)}).then(res=>res.json()).then(data=>setExp(prevExp=>{return{...prevExp,data};}));console.log(exp);// Add expense\nonAdd(exp);// Reset text input\nsetExp({title:\"\",amount:\"\",date:\"\",description:\"\"});event.preventDefault();}// Else\nelse{// Alert user to enter required fields\nalert(\"Please correctly enter required fields\");}};const changeDropdown=event=>{const{checked}=event.target;// Determine if it's a new category\nif(checked){setExp({...exp,title:\"\"});setIsCategory(false);}else{setIsCategory(true);}};// The expand function sets isExpanded to true\nconst expand=()=>{setExpanded(true);};// Return expense section\nreturn/*#__PURE__*/_jsxs(\"div\",{className:\"section add-expense\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Add Expense\"}),/*#__PURE__*/_jsxs(\"form\",{children:[isCategory&&/*#__PURE__*/_jsxs(\"select\",{className:\"dropdown\",name:\"title\",onClick:expand,onChange:handleChange,value:exp.title,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select Category\"}),categories.map((catItem,index)=>{return/*#__PURE__*/_jsx(Category,{name:catItem.name},index);})]}),!isCategory&&/*#__PURE__*/_jsx(\"input\",{name:\"title\",type:\"text\",onClick:expand,placeholder:\"Expense Category\",onChange:handleChange,value:exp.title,required:true}),/*#__PURE__*/_jsx(\"input\",{name:\"btn\",type:\"checkbox\",onClick:expand,onChange:changeDropdown}),/*#__PURE__*/_jsx(\"input\",{name:\"amount\",type:\"number\",onClick:expand,placeholder:\"Expense amount ($)\",onChange:handleChange,value:exp.amount,required:true}),/*#__PURE__*/_jsx(\"input\",{name:\"date\",type:\"date\",onClick:expand,placeholder:\"Date\",onChange:handleChange,value:exp.date,required:true}),isExpanded&&/*#__PURE__*/_jsx(\"textarea\",{name:\"description\",placeholder:\"Description of expense (optional)\",onChange:handleChange,value:exp.description,rows:3}),/*#__PURE__*/_jsx(Zoom,{in:isExpanded,children:/*#__PURE__*/_jsx(Fab,{onClick:submitExp,children:/*#__PURE__*/_jsx(AddIcon,{})})})]})]});}// Export function\nexport default Expense;","map":{"version":3,"names":["React","useState","useEffect","Category","Zoom","Fab","AddIcon","jsx","_jsx","jsxs","_jsxs","Expense","_ref","onAdd","isExpanded","setExpanded","categories","setCategories","isCategory","setIsCategory","exp","setExp","title","amount","date","description","fetch","then","res","json","data","handleChange","event","name","value","target","prevExp","submitExp","isWhitespaceString","str","replace","length","Number","includes","prevCats","method","headers","body","JSON","stringify","console","log","preventDefault","alert","changeDropdown","checked","expand","className","children","onClick","onChange","map","catItem","index","type","placeholder","required","rows","in"],"sources":["/Users/alonsogarcia/Desktop/School/NAU/SUMMER 24/CS 312/website/public/cs312/CS-312-Project/frontend/src/components/Expense.jsx"],"sourcesContent":["// Imports\nimport React, { useState, useEffect } from \"react\";\nimport Category from \"./Category.jsx\";\nimport Zoom from \"@material-ui/core/Zoom\";\nimport Fab from \"@material-ui/core/Fab\";\nimport AddIcon from \"@material-ui/icons/Add\";\n\n\n\n// The Expense function returns the expense section of the website\nfunction Expense( { onAdd } ) {\n\n\n\n  // Constants\n  const [ isExpanded, setExpanded ] = useState( false );\n  const [ categories, setCategories ] = useState([]);\n  const [ isCategory, setIsCategory ] = useState( true );\n  const [ exp, setExp ] = useState({\n    title: \"\",\n    amount: \"\",\n    date: \"\",\n    description: \"\"\n  });\n\n  useEffect( () => {\n    fetch( \"/api/categories\" )\n      .then( res => res.json() )\n      .then( data => setCategories( data ) );\n  }, [] );\n\n  // Nested functions\n\n    // The handleChange function gets current input from form\n    const handleChange = ( event ) => {\n\n      // Get user input\n      const { name, value } = event.target;\n\n      // return user input\n      setExp( prevExp => {\n\n        return {\n          ...prevExp,\n          [ name ]: value\n        };\n      });\n    }\n\n    // The submitExp submits the info from the form to the expense array\n    const submitExp = ( event ) => {\n\n      // Remove white space\n      const isWhitespaceString = str => !str.replace( /\\s/g, '' ).length;\n\n      const { title, amount, date, description } = exp;\n\n      // If user filled in required fields\n      if ( !isWhitespaceString( title ) && Number( amount ) >= 0\n             && date !== \"\" ) {\n\n        if ( !categories.includes( title ) ) {\n          setCategories( prevCats => {\n            setIsCategory( true );\n            return [\n              ...prevCats,\n              title\n            ];\n          });\n        }\n\n        fetch( 'http://localhost:8080/submit', {\n          method: \"POST\",\n          headers: { \"Content-type\": \"application/json\" },\n          body: JSON.stringify( exp )\n        })\n          .then( res => res.json() )\n          .then( data => setExp( prevExp => {\n            return {\n              ...prevExp,\n              data\n            }\n          }));\n\n          console.log( exp );\n\n          // Add expense\n          onAdd( exp );\n\n          // Reset text input\n          setExp({\n            title: \"\",\n            amount: \"\",\n            date: \"\",\n            description: \"\"\n          });\n\n        event.preventDefault();\n      }\n\n      // Else\n      else {\n\n        // Alert user to enter required fields\n        alert( \"Please correctly enter required fields\" );\n      }\n    }\n\n    const changeDropdown = ( event ) => {\n\n      const { checked } = event.target;\n\n      // Determine if it's a new category\n      if ( checked ) {\n        setExp({\n          ...exp,\n          title: \"\" } );\n        setIsCategory( false );\n      }\n      else {\n        setIsCategory( true );\n      }\n    }\n\n    // The expand function sets isExpanded to true\n    const expand = () => {\n      setExpanded( true );\n    }\n\n  // Return expense section\n  return (\n    <div className=\"section add-expense\">\n        <h3>Add Expense</h3>\n        <form>\n\n\n          { isCategory && (\n          <select\n            className=\"dropdown\"\n            name=\"title\"\n            onClick = { expand }\n            onChange={ handleChange }\n            value={ exp.title }\n          >\n\n\n            <option value=\"\">Select Category</option>\n            { categories.map( ( catItem, index ) => {\n              return (\n                <Category\n                  key={ index }\n                  name={ catItem.name }\n                />\n              );\n            })}\n\n\n\n          </select>)}\n\n\n\n          { !isCategory && (\n          <input\n            name=\"title\"\n            type=\"text\"\n            onClick={ expand }\n            placeholder=\"Expense Category\"\n            onChange={ handleChange }\n            value={ exp.title }\n            required\n          />\n          )}\n\n          <input\n            name=\"btn\"\n            type=\"checkbox\"\n            onClick = { expand }\n            onChange={ changeDropdown }\n          />\n\n          <input\n            name=\"amount\"\n            type=\"number\"\n            onClick={ expand }\n            placeholder=\"Expense amount ($)\"\n            onChange={ handleChange }\n            value={ exp.amount }\n            required\n          />\n\n\n\n          <input\n            name=\"date\"\n            type=\"date\"\n            onClick = { expand }\n            placeholder=\"Date\"\n            onChange={ handleChange }\n            value={ exp.date }\n            required\n          />\n\n\n\n          { isExpanded && (\n          <textarea\n            name=\"description\"\n            placeholder=\"Description of expense (optional)\"\n            onChange={ handleChange }\n            value={ exp.description }\n            rows={ 3 }\n          />)}\n\n\n\n          <Zoom in={ isExpanded }>\n            <Fab onClick={ submitExp }>\n              <AddIcon />\n            </Fab>\n          </Zoom>\n\n\n\n        </form>\n    </div>\n  );\n}\n\n\n\n// Export function\nexport default Expense;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}